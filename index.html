<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Schweizer Gesundheits-Jobs – Favoriten & Tooltips</title>
<style>
 :root{--bg:#f6f9fc;--card:#ffffffdd;--text:#16212d;--accent:#0b83d9;--muted:#64748b;}
 body.dark{--bg:#1b1e23;--card:#24272dcc;--text:#e8eaee;--accent:#46a0ff;--muted:#8c9bab;}

 body{margin:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
      background:var(--bg);color:var(--text);transition:.3s background,.3s color;}

 header{padding:2rem 1rem 1rem;text-align:center;
        background:linear-gradient(120deg,var(--accent),#4bc4ff);color:#fff;position:relative;}
 h1{margin:0;font-size:clamp(1.6rem,4vw,2.6rem);}
 header p{opacity:.85;margin:.4rem 0;font-size:.9rem;}

 #toggle{position:absolute;top:1.2rem;right:1.2rem;width:44px;height:44px;opacity:0;cursor:pointer;}
 #toggle+label{position:absolute;top:1.2rem;right:1.2rem;width:44px;height:44px;border-radius:50%;
              background:rgba(255,255,255,.25);backdrop-filter:blur(4px);
              display:flex;align-items:center;justify-content:center;transition:.4s;}
 #toggle+label svg{fill:#fff;width:24px;height:24px;} #toggle:checked+label{transform:rotate(180deg);}

 main{max-width:960px;margin:-3rem auto 3rem;padding:0 1rem;}
 section.card{background:var(--card);border-radius:1rem;padding:1rem 1.25rem;margin-top:2rem;
             box-shadow:0 4px 12px rgba(0,0,0,.08);backdrop-filter:blur(6px);}
 details{border-bottom:1px solid rgba(0,0,0,.05);} details:last-child{border:none;}
 summary{cursor:pointer;font-size:1.1rem;padding:.7rem 0;list-style:none;position:relative;}
 summary::after{content:'';position:absolute;right:0;top:50%;
                width:.55rem;height:.55rem;border:2px solid var(--accent);
                border-left:none;border-top:none;transform:translateY(-50%) rotate(45deg);transition:.35s;}
 details[open] summary::after{transform:translateY(-50%) rotate(-135deg);}

 ul.links{list-style:none;margin:0 0 1rem;padding-left:0;display:flex;flex-direction:column;gap:.45rem;}
 li.item{display:flex;align-items:center;gap:.6rem;position:relative;}
 a{color:var(--accent);text-decoration:none;font-weight:500;} a:hover{text-decoration:underline;}
 .star{font-size:1.15rem;cursor:pointer;color:var(--muted);user-select:none;transition:.2s;}
 .star.fav{color:var(--accent);}

 /* Tooltip */
 .tooltip{position:absolute;z-index:50;max-width:300px;background:var(--card);color:var(--text);
          border-radius:.9rem;box-shadow:0 4px 14px rgba(0,0,0,.12);padding:1rem;font-size:.9rem;
          line-height:1.4;display:none;flex-direction:column;gap:.45rem;}
 .tooltip h3{margin:.1rem 0 .5rem;font-size:.95rem;font-weight:600;color:var(--accent);}
 .tooltip ul{margin:.25rem 0 0 1rem;padding:0;} .tooltip ul li{list-style:disc;margin:.2rem 0;}

 footer{text-align:center;font-size:.85rem;color:var(--muted);margin-top:3rem;}
</style>
</head>
<body>
<input type="checkbox" id="toggle" aria-label="Farbschema wechseln">
<label for="toggle"><svg viewBox="0 0 24 24"><path d="M12 2a1 1 0 0 1 1 1v1.07a8 8 0 0 1 8 8h1.07a1 1 0 0 1 0 2H21a8 8 0 0 1-8 8v1.07a1 1 0 0 1-2 0V21a8 8 0 0 1-8-8H2.93a1 1 0 0 1 0-2H3a8 8 0 0 1 8-8V3a1 1 0 0 1 1-1z"/></svg></label>

<header>
  <h1>Job-Links im Schweizer Gesundheits-Ökosystem</h1>
  <p>Favoriten per ⭐ speichern – Tooltips zeigen die 3 neuesten Stellen</p>
</header>

<main>
<!-- FAVOURITES SECTION -->
<section class="card" id="fav-sec" style="display:none;">
  <details open><summary>⭐ Meine Favoriten</summary>
    <ul class="links" id="fav-list"></ul>
  </details>
</section>

<!-- ##############  ALLE KATEGORIEN (abgekürzt – hier nur 2 Beispiele) ############## -->
<section class="card"><details>
<summary>Bund / bundesnahe Institutionen</summary>
<ul class="links">
  <li class="item" data-id="bag"    data-desc="Bundesamt für Gesundheit – nationale Gesundheitspolitik.">
    <span class="star">☆</span><a href="https://www.bag.admin.ch/bag/de/home/das-bag/arbeiten-im-bag/offene-stellen.html" target="_blank">Bundesamt für Gesundheit (BAG)</a></li>
  <li class="item" data-id="obsan"  data-desc="Gesundheitsobservatorium – Analysen & Kennzahlen.">
    <span class="star">☆</span><a href="https://www.obsan.admin.ch/de/das-obsan/offene-stellen" target="_blank">Gesundheits­observatorium Obsan</a></li>
  <!-- … alle weiteren Bundesstellen hier … -->
</ul></details></section>

<section class="card"><details>
<summary>Stiftungen / Non-Profits</summary>
<ul class="links">
  <li class="item" data-id="lungenliga" data-desc="Lungenliga Schweiz – Vorsorge, Beratung und Forschung bei Atemwegserkrankungen.">
    <span class="star">☆</span><a href="https://www.lungenliga.ch/ueber-uns/jobs" target="_blank">Lungenliga Schweiz</a></li>
  <li class="item" data-id="gfs" data-desc="Gesundheitsförderung Schweiz – Nationale Stiftung für Prävention.">
    <span class="star">☆</span><a href="https://gesundheitsfoerderung.ch/stiftung/stellenangebote" target="_blank">Gesundheitsförderung Schweiz</a></li>
  <li class="item" data-id="krebsliga" data-desc="Krebsliga Schweiz – Unterstützung und Prävention.">
    <span class="star">☆</span><a href="https://www.krebsliga.ch/ueber-uns/jobs" target="_blank">Krebsliga Schweiz</a></li>
  <!-- … weitere Einträge … -->
</ul></details></section>
<!-- ##############  ENDE BEISPIEL ############## -->
</main>

<footer>Favoriten bleiben nur in diesem Browser gespeichert – alle Links ohne Gewähr</footer>

<!-- Tooltip -->
<div id="tooltip" class="tooltip" role="dialog" aria-live="polite"></div>

<script>
/* ========== 1. Dark-Mode Persistenz ========== */
const dmToggle=document.getElementById('toggle');
dmToggle.checked=localStorage.getItem('darkMode')==='1';
document.body.classList.toggle('dark',dmToggle.checked);
dmToggle.addEventListener('change',()=>{localStorage.setItem('darkMode',dmToggle.checked?'1':'0');document.body.classList.toggle('dark',dmToggle.checked);});

/* ========== 2. Favoriten (localStorage) ========== */
const LSKEY='favJobs';
const favUl=document.getElementById('fav-list');
const favIds=()=>JSON.parse(localStorage.getItem(LSKEY)||'[]');
const saveFav=ids=>localStorage.setItem(LSKEY,JSON.stringify(ids));
function renderFav(){ const ids=favIds(); document.getElementById('fav-sec').style.display=ids.length?'':'none';
  favUl.innerHTML=''; if(!ids.length) return;
  ids.sort(); ids.forEach(id=>{ const src=document.querySelector('.item[data-id="'+id+'"]'); if(src) favUl.appendChild(src.cloneNode(true));});
  document.querySelectorAll('.item').forEach(li=>li.querySelector('.star').classList.toggle('fav',ids.includes(li.dataset.id)));
}
document.addEventListener('click',e=>{
  if(e.target.matches('.star')){ const id=e.target.closest('.item').dataset.id;
    let ids=favIds(); ids=ids.includes(id)?ids.filter(x=>x!==id):[...ids,id]; saveFav(ids); renderFav(); }
});
renderFav();

/* ========== 3. Tooltip mit statischer JSON ========== */
let JOB_DATA={}; fetch('jobs-data.json').then(r=>r.json()).then(json=>JOB_DATA=json); // gleiche Verzeichnis-Ebene

const tp=document.getElementById('tooltip');
let hideT;
function pos(e){const r=tp.getBoundingClientRect();let x=e.pageX+15,y=e.pageY+15;
  if(x+r.width>innerWidth)x=innerWidth-r.width-12; if(y+r.height>innerHeight)y=e.pageY-r.height-15;
  tp.style.left=x+'px'; tp.style.top=y+'px';
}
function buildJobs(id){
  const jobs=JOB_DATA[id]||[];
  if(!jobs.length) return '<em>Keine aktuellen Stellen hinterlegt</em>';
  return '<ul>'+jobs.map(j=>`<li><a href="${j.url}" target="_blank">${j.title}</a><br><small>${j.location} · ${j.pensum}</small></li>`).join('')+'</ul>';
}
function show(li,e){
  clearTimeout(hideT);
  const id=li.dataset.id;
  tp.innerHTML=`<h3>${li.querySelector('a').textContent}</h3><p>${li.dataset.desc}</p>${buildJobs(id)}`;
  tp.style.display='flex'; pos(e);
}
function hide(){hideT=setTimeout(()=>tp.style.display='none',180);}
document.addEventListener('mousemove',e=>tp.style.display==='flex'&&pos(e));
document.addEventListener('mouseover',e=>{ const li=e.target.closest('.item'); if(li){show(li,e);} });
document.addEventListener('mouseout',e=>{
  const to=e.relatedTarget; if(!to||(!to.closest('.item') && !to.closest('.tooltip')))hide();
});
tp.addEventListener('mouseover',()=>clearTimeout(hideT)); tp.addEventListener('mouseout',hide);
</script>
</body>
</html>
